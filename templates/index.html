<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <title>SummaBrowse - PDF/Image Summarizer</title>
  <style>
    /* General Styles */
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--background-color);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
    }

    h1, h2 {
      color: var(--heading-color);
    }

    a {
      color: var(--link-color);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      margin: 10px 0;
    }

    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: var(--navbar-bg-color);
      padding: 10px 20px;
      color: var(--navbar-text-color);
    }

    .navbar .logo {
      font-size: 24px;
      font-weight: bold;
    }
    .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
     .upload-section {
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            border: 2px dashed #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
    .navbar .nav-links {
      display: flex;
      gap: 20px;
    }
    @media (max-width: 768px) {
    .content .steps {
      flex-direction: column;
      align-items: center;
    }

    .content .steps div {
      width: 90%;
      margin-bottom: 20px;
      }
    }

    .upload-section:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }

        .upload-section input[type="file"] {
            display: none;
        }

        .upload-section label {
            cursor: pointer;
            display: block;
        }

        .upload-section i {
            font-size: 3rem;
            color: #007bff;
            margin-bottom: 1rem;
        }

        .results {
            display: none;
            margin-top: 2rem;
        }

        .result-section {
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .result-section h2 {
            color: #333;
            margin-bottom: 1rem;
        }

        .result-section p {
            color: #666;
            line-height: 1.6;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 2rem 0;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            color: #dc3545;
            text-align: center;
            margin: 1rem 0;
            display: none;
        }

    .navbar .nav-links li {
      display: inline;
    }

    .navbar .theme-toggle {
      display: flex;
      align-items: center;
    }

    .theme-toggle .switch {
      position: relative;
      display: inline-block;
      width: 34px;
      height: 20px;
      margin-left: 10px;
    }

    .theme-toggle .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .theme-toggle .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 20px;
    }

    .theme-toggle .slider:before {
      position: absolute;
      content: "";
      height: 14px;
      width: 14px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    .theme-toggle .switch input:checked + .slider {
      background-color: #007bff;
    }

    .theme-toggle .switch input:checked + .slider:before {
      transform: translateX(14px);
    }

    /* Main Content */
    .content {
      padding: 20px;
      text-align: center;
    }

    .content section {
      margin-bottom: 40px;
    }

    .content .steps {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }
    .theme-toggle i {
  font-size: 20px;
  transition: transform 0.3s ease, color 0.3s ease;
  color: #f39c12;
  margin-right: 10px;
}

body.dark-mode .theme-toggle i {
  color: #f1c40f;
  transform: rotate(180deg);
}

    .content .steps div {
      width: 22%;
      background-color: #ffffff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .content .steps div h3 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .content .steps div p {
      font-size: 14px;
      color: #555;
    }

    /* Footer */
    footer {
      background-color: #f1f1f1;
      padding: 20px;
      text-align: center;
      font-size: 14px;
      color: #666;
    }

    footer a {
      color: #007bff;
      margin: 0 10px;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Theme Variables */
    :root {
      --background-color: #ffffff;
      --text-color: #000000;
      --heading-color: #333333;
      --link-color: #007bff;
      --navbar-bg-color: #007bff;
      --navbar-text-color: #ffffff;
    }

    body.dark-mode {
      --background-color: #121212;
      --text-color: #ffffff;
      --heading-color: #ffffff;
      --link-color: #1e88e5;
      --navbar-bg-color: #1e88e5;
      --navbar-text-color: #ffffff;
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="logo">SummaBrowse</div>
    <ul class="nav-links">
      <li><a href="#home">Home</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
    <div class="theme-toggle">
      <i id="themeIcon" class="fas fa-sun"></i>
      <label class="switch">
        <input type="checkbox" id="themeToggle">
        <span class="slider"></span>
      </label>
    </div>

    
  </nav>

  <!-- Main Content -->
  <main class="content">
    <section id="home">
      <h1>Welcome to SummaBrowse</h1>
      <p>Your one-stop solution for summarizing PDFs and images. Upload your files and get concise summaries in seconds!</p>
    </section>
    <div class="upload-section">
        <input type="file" id="fileInput" accept="image/*,application/pdf">
        <label for="fileInput">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Click to upload an image or PDF, or drag and drop</p>
            <p style="font-size: 0.8rem; color: #666;">Supported formats: PNG, JPG, JPEG, PDF</p>
        </label>
    </div>

    <div class="error" id="error"></div>

    <div class="loading">
        <div class="loading-spinner"></div>
        <p>Processing your file...</p>
    </div>

    <div class="results" id="results">
        <div class="result-section">
            <h2>Extracted Text</h2>
            <p id="extractedText"></p>
        </div>
        <div class="result-section">
            <h2>Summary</h2>
            <p id="summary"></p>
        </div>
        <div class="result-section">
            <a id="downloadLink" href="#" download="summary.txt" style="display: none;">Download Summary</a>
        </div>
    </div>
    <section id="video-processing">
      <h2>Process Video</h2>
      <p>Select a video source to process:</p>
      <div>
        <label>
          <input type="radio" name="videoSource" value="youtube" checked>
          YouTube Video
        </label>
        <label>
          <input type="radio" name="videoSource" value="local">
          Local Video File
        </label>
      </div>
      <div id="youtubeInput">
        <input type="text" id="youtubeUrl" placeholder="Enter YouTube video URL">
        <button id="processYoutubeButton">Process YouTube Video</button>
      </div>
      <div id="localInput" style="display: none;">
        <input type="file" id="localVideoFile" name="file"  accept="video/*">
        <button id="processLocalButton">Process Local Video</button>
      </div>
      <div class="loading" id="videoLoading" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processing your video...</p>
      </div>
      <div class="error" id="videoError" style="display: none;"></div>
      <div class="results" id="videoResults">
        
        <div class="result-section" id="videoSummarySection" style="display: none;">
            <h2>Video Summary</h2>
            <p id="videoSummary"></p>
        </div>
        <div class="result-section">
            <a id="downloadLink1" href="#" download="video_summary.txt" style="display: none;">Download Summary</a>
        </div>
    </div>
    
    </section>


    <section id="upload">
      <h2>How to Use This Summarizer</h2>
      <div class="steps">
        <div>
          <h3>1. Upload Your File</h3>
          <p>Insert, paste, or upload your PDF or image file.</p>
        </div>
        <div>
          <h3>2. Process the File</h3>
          <p>Our AI processes your file and extracts the key points.</p>
        </div>
        <div>
          <h3>3. Adjust Summary</h3>
          <p>Customize the summary length to suit your needs.</p>
        </div>
        <div>
          <h3>4. Download Summary</h3>
          <p>Get your summary in seconds and download it as a text file.</p>
        </div>
      </div>
    </section>

    <section id="features">
      <h2>Why Use This Summarizer?</h2>
      <ul>
        <li><strong>100% Free:</strong> Generate unlimited summaries without paying a penny.</li>
        <li><strong>Accurate:</strong> Get reliable and trustworthy summaries.</li>
        <li><strong>Secure:</strong> No data is stored, ensuring your privacy.</li>
        <li><strong>Fast:</strong> Get summaries within seconds, thanks to AI.</li>
        <li><strong>Flexible:</strong> Adjust summary length to get more or less detail.</li>
      </ul>
    </section>

    <section id="about">
      <h2>About Us</h2>
      <p>We are a team of passionate developers and AI enthusiasts dedicated to making information more accessible. Our goal is to help you save time and effort by providing quick and accurate summaries of your documents.</p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <p>
      <a href="#terms">Terms of Use</a> |
      <a href="#cookies">Cookie Preferences</a> |
      <a href="#privacy">Privacy Policy</a> |
      <a href="#happiness">Happiness Guarantee</a>
    </p>
    <p>&copy; 2025 SummaBrowse. All rights reserved.</p>
  </footer>


  <script>
    const uploadSection = document.querySelector('.upload-section');
    const fileInput = document.getElementById('fileInput');
    const loading = document.querySelector('.loading');
    const results = document.getElementById('results');
    const error = document.getElementById('error');
    const extractedText = document.getElementById('extractedText');
    const summary = document.getElementById('summary');
    const downloadLink = document.getElementById('downloadLink');

    document.querySelectorAll('input[name="videoSource"]').forEach(radio => {
      radio.addEventListener('change', () => {
        const isYoutube = radio.value === 'youtube';
        document.getElementById('youtubeInput').style.display = isYoutube ? 'block' : 'none';
        document.getElementById('localInput').style.display = isYoutube ? 'none' : 'block';
      });
    });

    // Handle drag and drop
    uploadSection.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadSection.style.borderColor = '#007bff';
    });

    uploadSection.addEventListener('dragleave', () => {
        uploadSection.style.borderColor = '#ccc';
    });

    uploadSection.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadSection.style.borderColor = '#ccc';
        const file = e.dataTransfer.files[0];
        if (file && (file.type.startsWith('image/') || file.type === 'application/pdf')) {
            handleFile(file);
        } else {
            showError("Unsupported file type. Please upload an image or PDF.");
        }
    });

    fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            handleFile(file);
        }
    });

    function handleFile(file) {
        const formData = new FormData();
        formData.append('file', file);

        // Show loading, hide results and error
        loading.style.display = 'block';
        results.style.display = 'none';
        error.style.display = 'none';

        fetch('/process', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                throw new Error(data.error);
            }
            
            // Display results
            extractedText.textContent = data.extracted_text;
            summary.textContent = data.summary;
            downloadLink.href = data.download_url;
            downloadLink.style.display = 'block';
            results.style.display = 'block';
        })
        .catch(err => {
            showError(err.message);
        })
        .finally(() => {
            loading.style.display = 'none';
        });
    }

    function showError(message) {
        error.textContent = message;
        error.style.display = 'block';
    }

  // Dark/Light Mode Toggle
  const themeToggle = document.getElementById("themeToggle");
  const themeLabel = document.getElementById("themeLabel");
  // Check if dark mode was previously enabled
if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark-mode");
  themeToggle.checked = true;
  themeLabel.textContent = "Dark Mode";
}

themeToggle.addEventListener("change", () => {
  if (themeToggle.checked) {
    document.body.classList.add("dark-mode");
    localStorage.setItem("theme", "dark");
    themeLabel.textContent = "Dark Mode";
  } else {
    document.body.classList.remove("dark-mode");
    localStorage.setItem("theme", "light");
    themeLabel.textContent = "Light Mode";
  }
});
const themeIcon = document.getElementById("themeIcon");

// Load preference if stored
if (localStorage.getItem("theme") === "dark") {
  document.body.classList.add("dark-mode");
  themeToggle.checked = true;
  themeIcon.classList.remove("fa-sun");
  themeIcon.classList.add("fa-moon");
}

// Toggle logic
themeToggle.addEventListener("change", () => {
  document.body.classList.toggle("dark-mode");
  const isDark = document.body.classList.contains("dark-mode");

  if (isDark) {
    themeIcon.classList.remove("fa-sun");
    themeIcon.classList.add("fa-moon");
    localStorage.setItem("theme", "dark");
  } else {
    themeIcon.classList.remove("fa-moon");
    themeIcon.classList.add("fa-sun");
    localStorage.setItem("theme", "light");
  }
});


const videoSourceRadios = document.getElementsByName("videoSource");
const youtubeInput = document.getElementById("youtubeInput");
const localInput = document.getElementById("localInput");
const processYoutubeButton = document.getElementById("processYoutubeButton");
const processLocalButton = document.getElementById("processLocalButton");
const videoLoading = document.getElementById("videoLoading");
const videoError = document.getElementById("videoError");
const videoResults = document.getElementById("videoResults");
const videoSummary = document.getElementById("videoSummary");
const downloadLink1 = document.getElementById("downloadLink1");

// Toggle input fields based on video source selection
videoSourceRadios.forEach((radio) => {
  radio.addEventListener("change", () => {
    if (radio.value === "youtube") {
      youtubeInput.style.display = "block";
      localInput.style.display = "none";
    } else {
      youtubeInput.style.display = "none";
      localInput.style.display = "block";
    }
  });
});

// Process YouTube video
processYoutubeButton.addEventListener("click", () => {
  const youtubeUrl = document.getElementById("youtubeUrl").value;
  if (!youtubeUrl) {
    showVideoError("Please enter a YouTube video URL.");
    return;
  }
  processVideo({ video_source: youtubeUrl, is_youtube: true });
});

// Process local video file
processLocalButton.addEventListener("click", () => {
  const localVideoFile = document.getElementById("localVideoFile").files[0];
  if (!localVideoFile) {
    showVideoError("Please select a local video file.");
    return;
  }
  const formData = new FormData();
  formData.append("video_file", localVideoFile);
  processVideo(formData, true);
});

// Process video (common function)
function processVideo(data, isLocal = false) {
  videoLoading.style.display = "block";
  videoError.style.display = "none";
  videoResults.style.display = "none";

  const url = "/process_video"; // Ensure this is correct
  console.log("Fetching from URL:", url);
  const options = isLocal
    ? { method: "POST", body: data }
    : {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data),
      };

  fetch(url, options)
    .then(async (response) => {
      const contentType = response.headers.get("content-type");

      if (!response.ok) {
        const text = await response.text();
        throw new Error(`Server Error: ${response.status}\n${text}`);
      }

      if (contentType && contentType.includes("application/json")) {
        return response.json();
      } else {
        const text = await response.text();
        throw new Error("Unexpected response type: " + text.slice(0, 100));
      }
    })
    .then((result) => {
      if (result.error) {
        throw new Error(result.error);
      }

      videoSummary.textContent = result.summary;
      videoResults.style.display = "block";
      videoSummarySection.style.display = "block";
      downloadLink1.href = result.download_url;
      downloadLink1.style.display = "inline";
    })
    .catch((err) => {
      console.error("Raw error:", err);
      showVideoError("Failed to process video: " + err.message);
    })
    .finally(() => {
      videoLoading.style.display = "none";
    });
}


function showVideoError(message) {
  videoError.textContent = message;
  videoError.style.display = "block";
}

</script>
</body>
</html>

